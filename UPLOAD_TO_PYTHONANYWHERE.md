# üì§ –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ –≤ PythonAnywhere

## üéØ –°–ø–æ—Å–æ–± 1: –ó–∞–≥—Ä—É–∑–∫–∞ –∞—Ä—Ö–∏–≤–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

### 1. –°–∫–∞—á–∞–π—Ç–µ –∞—Ä—Ö–∏–≤
–§–∞–π–ª `recipe_bot_pythonanywhere.zip` —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ñ–∞–π–ª—ã.

### 2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –≤ PythonAnywhere
1. –í–æ–π–¥–∏—Ç–µ –≤ –∞–∫–∫–∞—É–Ω—Ç PythonAnywhere
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "Files"
3. –°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `recipe_bot`)
4. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Å–æ–∑–¥–∞–Ω–Ω—É—é –ø–∞–ø–∫—É
5. –ù–∞–∂–º–∏—Ç–µ "Upload a file" –∏ –≤—ã–±–µ—Ä–∏—Ç–µ `recipe_bot_pythonanywhere.zip`
6. –ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –∞—Ä—Ö–∏–≤ –ø—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π –º—ã—à–∏
7. –í—ã–±–µ—Ä–∏—Ç–µ "Extract here"

## üéØ –°–ø–æ—Å–æ–± 2: –ó–∞–≥—Ä—É–∑–∫–∞ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

### –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ñ–∞–π–ª—ã:
```
recipe_bot/
‚îú‚îÄ‚îÄ web_app.py          # Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ wsgi.py             # WSGI –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ requirements.txt    # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ recipes.json        # –ë–∞–∑–∞ —Ä–µ—Ü–µ–ø—Ç–æ–≤
‚îî‚îÄ‚îÄ templates/
    ‚îî‚îÄ‚îÄ index.html      # –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
```

### –ü–æ—à–∞–≥–æ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞:

1. **–°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞**
   - –í —Ä–∞–∑–¥–µ–ª–µ "Files" —Å–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É `recipe_bot`

2. **–°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É templates**
   - –í –ø–∞–ø–∫–µ `recipe_bot` —Å–æ–∑–¥–∞–π—Ç–µ –ø–æ–¥–ø–∞–ø–∫—É `templates`

3. **–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª—ã –ø–æ –æ–¥–Ω–æ–º—É:**
   - `web_app.py` ‚Üí –≤ –ø–∞–ø–∫—É `recipe_bot`
   - `wsgi.py` ‚Üí –≤ –ø–∞–ø–∫—É `recipe_bot`
   - `requirements.txt` ‚Üí –≤ –ø–∞–ø–∫—É `recipe_bot`
   - `recipes.json` ‚Üí –≤ –ø–∞–ø–∫—É `recipe_bot`
   - `index.html` ‚Üí –≤ –ø–∞–ø–∫—É `recipe_bot/templates`

## üéØ –°–ø–æ—Å–æ–± 3: –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ

### –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞:
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
3. –í PythonAnywhere —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Ñ–∞–π–ª —Å —Ç–µ–º –∂–µ –∏–º–µ–Ω–µ–º
4. –í—Å—Ç–∞–≤—å—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ

## üìã –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–æ–≤

### web_app.py
```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-

import os
import json
import random
from flask import Flask, render_template, request, jsonify
from dotenv import load_dotenv

# –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
load_dotenv()

app = Flask(__name__)

# –ó–∞–≥—Ä—É–∂–∞–µ–º —Ä–µ—Ü–µ–ø—Ç—ã –∏–∑ —Ñ–∞–π–ª–∞
def load_recipes():
    try:
        with open('recipes.json', 'r', encoding='utf-8') as file:
            data = json.load(file)
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ data —Å–ø–∏—Å–∫–æ–º (–ø—Ä—è–º–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞) –∏–ª–∏ —Å–ª–æ–≤–∞—Ä–µ–º —Å –∫–ª—é—á–æ–º 'recipes'
            if isinstance(data, list):
                return {"recipes": data}
            elif 'recipes' in data and isinstance(data['recipes'], list):
                return data
            else:
                print("–û—à–∏–±–∫–∞: –ù–µ–≤–µ—Ä–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–∞ recipes.json")
                return {"recipes": []}
    except FileNotFoundError:
        print("–§–∞–π–ª recipes.json –Ω–µ –Ω–∞–π–¥–µ–Ω. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª —Å —Ä–µ—Ü–µ–ø—Ç–∞–º–∏.")
        return {"recipes": []}
    except json.JSONDecodeError as e:
        print(f"–û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è JSON —Ñ–∞–π–ª–∞: {e}")
        return {"recipes": []}
    except Exception as e:
        print(f"–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ä–µ—Ü–µ–ø—Ç–æ–≤: {e}")
        return {"recipes": []}

# –ì–ª–æ–±–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ—Ü–µ–ø—Ç–æ–≤
RECIPES = load_recipes()
USED_RECIPE_IDS = set()

@app.route('/')
def index():
    """–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞"""
    return render_template('index.html')

@app.route('/api/recipes')
def get_recipes():
    """API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç—Ä–µ—Ö —Å–ª—É—á–∞–π–Ω—ã—Ö —Ä–µ—Ü–µ–ø—Ç–æ–≤"""
    try:
        if not RECIPES["recipes"]:
            return jsonify({"error": "–†–µ—Ü–µ–ø—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã"}), 404
        
        # –ü–æ–ª—É—á–∞–µ–º –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–µ—Ü–µ–ø—Ç—ã
        available_recipes = [r for r in RECIPES["recipes"] if r["number"] not in USED_RECIPE_IDS]
        
        # –ï—Å–ª–∏ –≤—Å–µ —Ä–µ—Ü–µ–ø—Ç—ã –±—ã–ª–∏ –ø–æ–∫–∞–∑–∞–Ω—ã, —Å–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫
        if len(available_recipes) < 3:
            USED_RECIPE_IDS.clear()
            available_recipes = RECIPES["recipes"]
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —É –Ω–∞—Å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ä–µ—Ü–µ–ø—Ç–æ–≤
        if len(available_recipes) < 3:
            return jsonify({"error": "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ä–µ—Ü–µ–ø—Ç–æ–≤ –¥–ª—è –ø–æ–∫–∞–∑–∞. –ù—É–∂–Ω–æ –º–∏–Ω–∏–º—É–º 3 —Ä–µ—Ü–µ–ø—Ç–∞."}), 400
        
        # –í—ã–±–∏—Ä–∞–µ–º —Ç—Ä–∏ —Å–ª—É—á–∞–π–Ω—ã—Ö —Ä–µ—Ü–µ–ø—Ç–∞
        selected_recipes = random.sample(available_recipes, 3)
        
        # –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–º–µ—Ä –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Ä–µ—Ü–µ–ø—Ç–æ–≤ –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ
        for recipe in selected_recipes:
            USED_RECIPE_IDS.add(recipe["number"])
        
        return jsonify({
            "success": True,
            "recipes": selected_recipes,
            "total_recipes": len(RECIPES["recipes"])
        })
        
    except Exception as e:
        return jsonify({"error": f"–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞: {str(e)}"}), 500

@app.route('/api/recipes/count')
def get_recipe_count():
    """API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ä–µ—Ü–µ–ø—Ç–æ–≤"""
    return jsonify({
        "total_recipes": len(RECIPES["recipes"]),
        "used_recipes": len(USED_RECIPE_IDS)
    })

@app.route('/api/recipes/reset')
def reset_used_recipes():
    """API –¥–ª—è —Å–±—Ä–æ—Å–∞ —Å—á–µ—Ç—á–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö —Ä–µ—Ü–µ–ø—Ç–æ–≤"""
    global USED_RECIPE_IDS
    USED_RECIPE_IDS.clear()
    return jsonify({"success": True, "message": "–°—á–µ—Ç—á–∏–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö —Ä–µ—Ü–µ–ø—Ç–æ–≤ —Å–±—Ä–æ—à–µ–Ω"})

if __name__ == '__main__':
    # –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
    app.run(debug=True, host='0.0.0.0', port=5000)
else:
    # –î–ª—è PythonAnywhere
    app = app
```

### wsgi.py
```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-

"""
WSGI —Ñ–∞–π–ª –¥–ª—è PythonAnywhere
–≠—Ç–æ—Ç —Ñ–∞–π–ª –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–∫–∞–∑–∞–Ω –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è PythonAnywhere
"""

import sys
import os

# –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Ç—å –∫ –ø—Ä–æ–µ–∫—Ç—É –≤ sys.path
# –ó–∞–º–µ–Ω–∏—Ç–µ 'yourusername' –Ω–∞ –≤–∞—à–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è PythonAnywhere
project_path = '/home/yourusername/recipe_bot'
if project_path not in sys.path:
    sys.path.append(project_path)

# –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
from web_app import app as application

# –î–ª—è –æ—Ç–ª–∞–¥–∫–∏ (–º–æ–∂–Ω–æ —É–±—Ä–∞—Ç—å –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ)
if __name__ == '__main__':
    application.run()
```

### requirements.txt
```
flask>=2.3.0
python-dotenv==1.0.0
gunicorn>=21.0.0
```

### templates/index.html
[–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ index.html - —Å–º. —Ñ–∞–π–ª templates/index.html]

## üîß –ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
   ```bash
   pip install --user -r requirements.txt
   ```

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ WSGI —Ñ–∞–π–ª:**
   - –í —Ä–∞–∑–¥–µ–ª–µ "Web" ‚Üí –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
   - –ù–∞–∂–º–∏—Ç–µ –Ω–∞ WSGI —Ñ–∞–π–ª
   - –ó–∞–º–µ–Ω–∏—Ç–µ `yourusername` –Ω–∞ –≤–∞—à–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

3. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
   - –ù–∞–∂–º–∏—Ç–µ "Reload" –≤ —Ä–∞–∑–¥–µ–ª–µ "Web"

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ URL –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ!

---
**–£—Å–ø–µ—à–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏!** üöÄ
